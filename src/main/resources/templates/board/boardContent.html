<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
    <style>
        .fakeimg {
            height: 200px;
            background: #aaa;
        }

        .crudButton {
            display: inline-block;
            font-weight: 400;
            color: white;
            text-align: center;
            vertical-align: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            background-color: #343a40!important;
            border: 1px solid transparent;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: 0.25rem;
            margin-top: 10px;
            transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
        }
    </style>
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/css/headers.css" rel="stylesheet">
</head>
<body>

<!--<div class="jumbotron text-center" style="margin-bottom:0">-->
<!--    <h1>게시판</h1>-->
<!--</div>-->

<header class="p-3 bg-dark text-white">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/></svg>
            </a>
            <a sec:authorize="isAuthenticated()" sec:authentication="name"
               th:href="@{'/member/memberInfo/' + ${#authentication.name}}"></a>
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><a href="/" class="nav-link px-2 text-secondary">Home</a></li>
                <li><a href="/board/boardList" class="nav-link px-2 text-white">Board</a></li>
                <li><a href="#" class="nav-link px-2 text-white">Pricing</a></li>
                <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
                <li><a href="#" class="nav-link px-2 text-white">About</a></li>
            </ul>

            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
                <input type="search" class="form-control form-control-dark" placeholder="Search..." aria-label="Search">
            </form>

            <div class="text-end">
                <button type="button" class="btn btn-outline-light me-2"
                        sec:authorize="isAnonymous()"
                        onclick="location.href='/member/memberLoginForm'" >Login</button>

                <button type="button" class="btn btn-outline-light me-2"
                        sec:authorize="isAuthenticated()"
                        onclick="location.href='/member/logout'" >Logout</button>
                <button type="button" class="btn btn-warning"
                        sec:authorize="isAnonymous()"
                        onclick="location.href='/member/memberJoinForm'">Sign-up</button>
            </div>
        </div>
    </div>
</header>

<div class="container" style="margin-top:30px">
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <h5 th:text="'제목 : ' + ${board.title}"></h5>
            </div>
            <div>
                <td th:text="'작성자 : ' + ${board.createdBy}"></td>
                <br><br>
            </div>
            <h5> 내용 </h5>
            <div style="border:1px solid; padding:10px;">
                <dl>
                    <dd th:text="${board.content}"></dd>
                </dl>
            </div>
        </div>
        <button type="button" class = "crudButton" id="crudButton delete"
                th:if="${board.createdBy} == ${#authentication.name}"
                th:onclick="|location.href='@{/board/delete/{id}(id=${board.id})}'|">게시글 삭제</button>
        <button type="button" class = "crudButton" id="crudButton update"
                th:if="${board.createdBy} == ${#authentication.name}"
                th:onclick="|location.href='@{/board/update/{id}(id=${board.id})}'|">게시글 수정</button>
    </div>
</div>
<form th:action="@{/comment/write/{board_id}(board_id=${board.id})}" method="post">
    <div class="comment-form" style="text-align: center;">
        <div class="comment-form2" style="width:300px;height: 200px;display: inline-block">
            <label for="content">댓글 달기</label>
            <textarea class="form-control" id="content" name="content" rows="3"></textarea>
<!--            <input type="hidden" name = "board_id" th:value="${board.id}">-->
            <button type="submit" class="btn btn-primary" onclick="window.location.reload()">작성</button>
        </div>
    </div>
</form>
<div class="container">
    <table class="table table-hover">
        <tr>
            <th>작성자</th>
            <th>내용</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="comment : ${comments}">
            <td style="display: none" th:text="${comment.id}"></td>
            <td th:text="${comment.createdBy}"></td>
            <td th:text="${comment.content}"></td>
            <td><button type="button" class = "crudButton"
                    th:if="${comment.createdBy} == ${#authentication.name}"
                    th:onclick="|location.href='@{/comment/delete/{id}(id=${comment.id})}'|">댓글 삭제</button></td>
            <td><button type="button" class = "crudButton"
                    th:if="${comment.createdBy} == ${#authentication.name}"
                    th:onclick="|location.href='@{/board/update/{id}(id=${board.id})}'|">댓글 수정</button></td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>